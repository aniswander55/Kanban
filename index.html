<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rainmaker 4.0 Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

                 body {
             font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
             background: linear-gradient(135deg, #e6f3ff 0%, #b3d9ff 100%);
             padding: 20px;
             line-height: 1.6;
         }

        .container {
            width: 100%;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .architecture-container {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
        }

        .columns-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin: 15px 0;
        }

                 .column {
             border-radius: 15px;
             overflow: hidden;
             box-shadow: 0 4px 15px rgba(0,0,0,0.1);
             background: white;
             cursor: grab;
             transition: transform 0.2s ease, box-shadow 0.2s ease;
         }

        .column.dragging {
            cursor: grabbing;
            transform: rotate(2deg) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            z-index: 1000;
        }

                 .column.drag-over {
             border: 2px dashed #87ceeb;
             opacity: 0.8;
         }

         .item.dragging {
             opacity: 0.5;
             transform: rotate(5deg) scale(1.05);
             z-index: 1000;
         }

         .column-content.drag-over {
             background: #d1e7dd;
             border: 2px dashed #28a745;
         }

        .column-header {
            padding: 20px 15px;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;
            position: relative;
            cursor: grab;
            outline: none;
            border: 1px solid transparent;
            border-radius: 4px;
            transition: border-color 0.2s ease, background 0.2s ease;
        }

        .column-header:active {
            cursor: grabbing;
        }

        .column-header:hover {
            border-color: rgba(255, 255, 255, 0.3);
        }

        .column-header:focus {
            border-color: #87ceeb;
            background: rgba(135, 206, 235, 0.1);
            cursor: text;
        }

                         .column-content {
            padding: 10px;
            background: #e2e8f0;
            min-height: 600px;
        }

        .items-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
        }

        .add-item-btn {
            background: #059669;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.8em;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.2s ease;
        }

        .add-item-btn:hover {
            background: #047857;
        }

                 .export-import-controls {
             text-align: center;
             margin: 20px 0;
             padding: 15px;
             background: white;
             border-radius: 10px;
             box-shadow: 0 4px 15px rgba(0,0,0,0.1);
         }

        .export-import-controls button {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            margin: 0 10px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .export-import-controls button:hover {
            background: #2563eb;
        }

        .export-import-controls button.export {
            background: #059669;
        }

        .export-import-controls button.export:hover {
            background: #047857;
        }

        .export-import-controls button.import {
            background: #dc2626;
        }

        .export-import-controls button.import:hover {
            background: #b91c1c;
        }

        .file-input {
            display: none;
        }

                                  .item {
             background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
             padding: 8px;
             border-radius: 8px;
             border-left: 4px solid;
             box-shadow: 0 2px 8px rgba(0,0,0,0.1);
             transition: transform 0.2s ease, opacity 0.3s ease;
             position: relative;
         }

         .item.completed {
             background: linear-gradient(135deg, #581c87 0%, #7c3aed 100%);
         }

         .item.completed h4 {
             color: white;
         }

        .item .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

                 .item .complete-btn {
             position: absolute;
             top: 8px;
             left: 8px;
             background: #e5e7eb;
             color: #9ca3af;
             border: 2px solid #d1d5db;
             border-radius: 4px;
             width: 24px;
             height: 24px;
             font-size: 14px;
             cursor: pointer;
             opacity: 0;
             transition: opacity 0.2s ease, background 0.2s ease, border-color 0.2s ease;
             display: flex;
             align-items: center;
             justify-content: center;
         }

         .item .complete-btn.completed {
             background: #3b82f6;
             color: white;
             border-color: #3b82f6;
         }

                 .item .complete-btn:hover {
             background: #d1d5db;
             border-color: #9ca3af;
         }

         .item .complete-btn.completed:hover {
             background: #2563eb;
             border-color: #2563eb;
         }

                 .item:hover .delete-btn {
             opacity: 1;
         }

         .item .complete-btn.completed {
             opacity: 1;
         }

         .item:hover .complete-btn {
             opacity: 1;
         }

        .item .delete-btn:hover {
            background: #b91c1c;
        }

        

                                  .item h4 {
             color: white;
             margin-bottom: 6px;
             font-size: 0.9em;
             cursor: text;
             outline: none;
             border: 1px solid transparent;
             padding: 2px 4px;
             padding-left: 40px;
             border-radius: 4px;
             transition: border-color 0.2s ease;
             max-width: 280px;
             word-wrap: break-word;
         }

                 .item h4:focus {
             border-color: #87ceeb;
             background: rgba(135, 206, 235, 0.1);
         }

        .item p {
            display: none;
        }

                 /* Column-specific colors - Darker Theme */
         .column-1 .column-header { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); }
         .column-1 .item { border-left-color: #2c5530; }

         .column-2 .column-header { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); }
         .column-2 .item { border-left-color: #8b4513; }

         .column-3 .column-header { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); }
         .column-3 .item { border-left-color: #1e3a8a; }

         .column-4 .column-header { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); }
         .column-4 .item { border-left-color: #581c87; }

         .column-5 .column-header { background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); }
         .column-5 .item { border-left-color: #991b1b; }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .columns-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .columns-container {
                grid-template-columns: 1fr;
            }
            
            .column-header {
                font-size: 1em;
            }
        }

                 .stack-section {
             background: white;
             padding: 20px;
             border-radius: 10px;
             margin-top: 20px;
             box-shadow: 0 4px 15px rgba(0,0,0,0.1);
         }

         .stack-section h3 {
             color: #374151;
             margin-bottom: 15px;
             text-decoration: underline;
             font-size: 1.2em;
         }

         .stack-items {
             display: flex;
             gap: 15px;
             flex-wrap: wrap;
         }

         .stack-item {
             background: #f8fafc;
             color: #374151;
             padding: 10px 15px;
             border-radius: 8px;
             border-left: 4px solid #3b82f6;
             font-weight: bold;
             box-shadow: 0 2px 8px rgba(0,0,0,0.1);
         }
    </style>
</head>
<body>
        <div class="container">
        <div class="architecture-container">
            <div class="columns-container">
                <!-- Column 1: Internal Datasets -->
                <div class="column column-1">
                    <div class="column-header">
                        📊 INTERNAL DATASETS
                    </div>
                    <div class="column-content">
                        <div class="items-list">
                            <div class="item">
                                <h4>Companies</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Industries</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Decision maker groups</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Target profiles</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Campaigns</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>My targets</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 2: Internal Processes -->
                <div class="column column-2">
                    <div class="column-header">
                        ⚙️ INTERNAL PROCESSES
                    </div>
                    <div class="column-content">
                        <div class="items-list">
                            <div class="item">
                                <h4>New user wizard</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>MSG Campaigns</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Target Profiles</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>My Tasks</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Decision Maker Search Wizard</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Linked Connect</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Linked Engage</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 3: Data APIs -->
                <div class="column column-3">
                    <div class="column-header">
                        🌐 DATA API's
                    </div>
                    <div class="column-content">
                        <div class="items-list">
                            <div class="item">
                                <h4>Get Decision Makers</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Get Emails</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Get Phone</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Get Company Insights</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Get People Insights</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 4: External Actions -->
                <div class="column column-4">
                    <div class="column-header">
                        🎯 EXTERNAL ACTIONS
                    </div>
                    <div class="column-content">
                        <div class="items-list">
                            <div class="item">
                                <h4>LinkedIn Connections</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>LinkedIn Engage</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Email Agent</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>TXT Agent</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Notify User</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 5: Intelligent Engines -->
                <div class="column column-5">
                    <div class="column-header">
                        🧠 INTELLIGENT ENGINES
                    </div>
                    <div class="column-content">
                        <div class="items-list">
                            <div class="item">
                                <h4>Campaign Message Creator</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                            <div class="item">
                                <h4>Recommendations</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                </div>

        <!-- Export/Import Controls -->
         <div class="export-import-controls">
             <button class="export" onclick="exportData()">💾 Export Data</button>
             <button class="import" onclick="document.getElementById('importFile').click()">📁 Import Data</button>
             <input type="file" id="importFile" class="file-input" accept=".json" onchange="importData(event)">
             <p style="color: #a0aec0; margin-top: 10px; font-size: 0.8em;">
                 💡 Tip: Export your data regularly to prevent losing your work!
             </p>
         </div>
     </div>

    <script>
        // Export and Import functionality
        function exportData() {
            const data = localStorage.getItem('rainmaker-architecture');
            if (data) {
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `rainmaker-architecture-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                alert('✅ Data exported successfully!');
            } else {
                alert('❌ No data to export');
            }
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = e.target.result;
                        localStorage.setItem('rainmaker-architecture', data);
                        loadArchitecture();
                        alert('✅ Data imported successfully!');
                    } catch (error) {
                        alert('❌ Error importing data: ' + error.message);
                    }
                };
                reader.readAsText(file);
            }
            event.target.value = ''; // Reset file input
        }

        // Save and load functionality
        function saveArchitecture() {
            const columns = document.querySelectorAll('.column');
            const architectureData = {};
            
            columns.forEach((column, columnIndex) => {
                const columnKey = `column-${columnIndex + 1}`;
                const items = column.querySelectorAll('.item');
                const itemsData = [];
                
                items.forEach(item => {
                    const title = item.querySelector('h4').textContent;
                    const isCompleted = item.classList.contains('completed');
                    itemsData.push({
                        title: title,
                        completed: isCompleted
                    });
                });
                
                architectureData[columnKey] = itemsData;
            });
            
            // Save column headers
            const columnHeaders = Array.from(columns).map(col => col.querySelector('.column-header').textContent);
            architectureData.columnHeaders = columnHeaders;
            
            // Save column order
            const columnOrder = Array.from(columns).map(col => col.className.split(' ').find(cls => cls.startsWith('column-')));
            architectureData.columnOrder = columnOrder;
            
            localStorage.setItem('rainmaker-architecture', JSON.stringify(architectureData));
            console.log('Architecture saved!');
        }

        function loadArchitecture() {
            const savedData = localStorage.getItem('rainmaker-architecture');
            if (savedData) {
                const architectureData = JSON.parse(savedData);
                
                // Restore column order if saved
                if (architectureData.columnOrder) {
                    const columnsContainer = document.querySelector('.columns-container');
                    const columns = Array.from(document.querySelectorAll('.column'));
                    
                    architectureData.columnOrder.forEach(columnClass => {
                        const column = columns.find(col => col.className.includes(columnClass));
                        if (column) {
                            columnsContainer.appendChild(column);
                        }
                    });
                }
                
                // Restore column headers if saved
                if (architectureData.columnHeaders) {
                    const columns = document.querySelectorAll('.column');
                    architectureData.columnHeaders.forEach((headerText, index) => {
                        if (columns[index]) {
                            const header = columns[index].querySelector('.column-header');
                            if (header) {
                                header.textContent = headerText;
                            }
                        }
                    });
                }
                
                Object.keys(architectureData).forEach(columnKey => {
                    if (columnKey === 'columnOrder' || columnKey === 'columnHeaders') return; // Skip metadata
                    
                    const column = document.querySelector(`.${columnKey}`);
                    if (column) {
                        const itemsList = column.querySelector('.items-list');
                        const items = itemsList.querySelectorAll('.item');
                        
                        // Clear existing items
                        items.forEach(item => item.remove());
                        
                        // Add saved items
                        architectureData[columnKey].forEach(itemData => {
                            const newItem = document.createElement('div');
                            newItem.className = 'item';
                            if (itemData.completed) {
                                newItem.classList.add('completed');
                            }
                            newItem.innerHTML = `
                                <h4 contenteditable="true">${itemData.title}</h4>
                                <button class="complete-btn">✓</button>
                                <button class="delete-btn">×</button>
                            `;
                            
                            // Add complete functionality
                            const completeBtn = newItem.querySelector('.complete-btn');
                            if (itemData.completed) {
                                completeBtn.classList.add('completed');
                            }
                            completeBtn.onclick = function() {
                                newItem.classList.toggle('completed');
                                this.classList.toggle('completed');
                                saveArchitecture();
                            };
                            
                            // Add delete functionality
                            const deleteBtn = newItem.querySelector('.delete-btn');
                            deleteBtn.onclick = function() {
                                if (confirm('Delete this item?')) {
                                    newItem.remove();
                                    saveArchitecture();
                                }
                            };
                            
                            // Make editable and save on change
                            const title = newItem.querySelector('h4');
                            title.addEventListener('blur', function() {
                                saveArchitecture();
                            });
                            
                            itemsList.appendChild(newItem);
                        });
                    }
                });
                
                console.log('Architecture loaded!');
            }
        }

                 // Drag and drop functionality
         function initializeDragAndDrop() {
             const columns = document.querySelectorAll('.column');
             const columnsContainer = document.querySelector('.columns-container');
             
             // Column drag and drop
             columns.forEach(column => {
                 column.setAttribute('draggable', true);
                 
                 column.addEventListener('dragstart', function(e) {
                     this.classList.add('dragging');
                     e.dataTransfer.setData('text/plain', this.className);
                 });
                 
                 column.addEventListener('dragend', function() {
                     this.classList.remove('dragging');
                     document.querySelectorAll('.column').forEach(col => {
                         col.classList.remove('drag-over');
                     });
                 });
                 
                 column.addEventListener('dragover', function(e) {
                     e.preventDefault();
                     this.classList.add('drag-over');
                 });
                 
                 column.addEventListener('dragleave', function() {
                     this.classList.remove('drag-over');
                 });
                 
                 column.addEventListener('drop', function(e) {
                     e.preventDefault();
                     this.classList.remove('drag-over');
                     
                     const draggedColumn = document.querySelector('.dragging');
                     if (draggedColumn && draggedColumn !== this) {
                         const allColumns = Array.from(columnsContainer.children);
                         const draggedIndex = allColumns.indexOf(draggedColumn);
                         const dropIndex = allColumns.indexOf(this);
                         
                         if (draggedIndex < dropIndex) {
                             this.parentNode.insertBefore(draggedColumn, this.nextSibling);
                         } else {
                             this.parentNode.insertBefore(draggedColumn, this);
                         }
                         
                         // Auto-save after reordering
                         saveArchitecture();
                     }
                 });
             });
             
             // Item drag and drop
             function initializeItemDragAndDrop() {
                 const items = document.querySelectorAll('.item');
                 const columns = document.querySelectorAll('.column-content');
                 
                 items.forEach(item => {
                     item.setAttribute('draggable', true);
                     
                     item.addEventListener('dragstart', function(e) {
                         this.classList.add('dragging');
                         e.dataTransfer.setData('text/plain', 'item');
                         e.dataTransfer.setData('item-id', this.dataset.itemId || Math.random().toString(36));
                     });
                     
                     item.addEventListener('dragend', function() {
                         this.classList.remove('dragging');
                         document.querySelectorAll('.column-content').forEach(col => {
                             col.classList.remove('drag-over');
                         });
                     });
                 });
                 
                 columns.forEach(column => {
                     column.addEventListener('dragover', function(e) {
                         e.preventDefault();
                         this.classList.add('drag-over');
                     });
                     
                     column.addEventListener('dragleave', function() {
                         this.classList.remove('drag-over');
                     });
                     
                                           column.addEventListener('drop', function(e) {
                          e.preventDefault();
                          this.classList.remove('drag-over');
                          
                          const draggedItem = document.querySelector('.item.dragging');
                          if (draggedItem) {
                              const itemsList = this.querySelector('.items-list');
                              if (itemsList) {
                                  // Get the drop position
                                  const afterElement = getDropAfterElement(itemsList, e.clientY);
                                  
                                  if (afterElement == null) {
                                      itemsList.appendChild(draggedItem);
                                  } else {
                                      itemsList.insertBefore(draggedItem, afterElement);
                                  }
                                  
                                  saveArchitecture();
                              }
                          }
                      });
                 });
             }
             
                           // Helper function to determine drop position
              function getDropAfterElement(container, y) {
                  const draggableElements = [...container.querySelectorAll('.item:not(.dragging)')];
                  
                  return draggableElements.reduce((closest, child) => {
                      const box = child.getBoundingClientRect();
                      const offset = y - box.top - box.height / 2;
                      
                      if (offset < 0 && offset > closest.offset) {
                          return { offset: offset, element: child };
                      } else {
                          return closest;
                      }
                  }, { offset: Number.NEGATIVE_INFINITY }).element;
              }
              
              // Initialize item drag and drop
              initializeItemDragAndDrop();
              
              // Re-initialize item drag and drop when new items are added
             const observer = new MutationObserver(function(mutations) {
                 mutations.forEach(function(mutation) {
                     if (mutation.type === 'childList') {
                         initializeItemDragAndDrop();
                     }
                 });
             });
             
             columns.forEach(column => {
                 observer.observe(column, { childList: true, subtree: true });
             });
         }

                 // Initialize everything
         document.addEventListener('DOMContentLoaded', function() {
             // Check if we have valid saved data first
             const savedData = localStorage.getItem('rainmaker-architecture');
             if (savedData) {
                 try {
                     const parsedData = JSON.parse(savedData);
                     // Only load if we have actual item data
                     if (parsedData.column1 && parsedData.column1.length > 0) {
                         loadArchitecture();
                     } else {
                         // No valid saved data, set up default items
                         setupDefaultItems();
                     }
                 } catch (error) {
                     console.log('Invalid saved data, setting up defaults');
                     setupDefaultItems();
                 }
             } else {
                 // No saved data, set up default items
                 setupDefaultItems();
             }
             
             function setupDefaultItems() {
                 // Set initial completed items based on the handwritten diagram
                 setTimeout(() => {
                     // Internal Datasets - all completed
                     const column1 = document.querySelector('.column-1');
                     if (column1) {
                         column1.querySelectorAll('.item').forEach(item => {
                             item.classList.add('completed');
                             const completeBtn = item.querySelector('.complete-btn');
                             if (completeBtn) completeBtn.classList.add('completed');
                         });
                     }
                     
                     // Internal Processes - some completed
                     const column2 = document.querySelector('.column-2');
                     if (column2) {
                         const completedItems = ['MSG Campaigns', 'Target Profiles', 'Decision Maker Search Wizard'];
                         column2.querySelectorAll('.item').forEach(item => {
                             const title = item.querySelector('h4').textContent;
                             if (completedItems.includes(title)) {
                                 item.classList.add('completed');
                                 const completeBtn = item.querySelector('.complete-btn');
                                 if (completeBtn) completeBtn.classList.add('completed');
                             }
                         });
                     }
                     
                     // Data APIs - some completed
                     const column3 = document.querySelector('.column-3');
                     if (column3) {
                         const completedItems = ['Get Decision Makers', 'Get Emails', 'Get Phone'];
                         column3.querySelectorAll('.item').forEach(item => {
                             const title = item.querySelector('h4').textContent;
                             if (completedItems.includes(title)) {
                                 item.classList.add('completed');
                                 const completeBtn = item.querySelector('.complete-btn');
                                 if (completeBtn) completeBtn.classList.add('completed');
                             }
                         });
                     }
                     
                     // Save the initial state
                     saveArchitecture();
                 }, 100);
             }
            
            // Initialize drag and drop
            initializeDragAndDrop();
            
            // Make column headers editable
            const columnHeaders = document.querySelectorAll('.column-header');
            columnHeaders.forEach(header => {
                header.contentEditable = true;
                header.addEventListener('blur', function() {
                    saveArchitecture();
                });
            });
            
            // Make all item titles editable
            const items = document.querySelectorAll('.item h4');
            items.forEach(item => {
                item.contentEditable = true;
                item.addEventListener('blur', function() {
                    saveArchitecture();
                });
            });

            // Add functionality to all existing buttons
            const completeBtns = document.querySelectorAll('.complete-btn');
            completeBtns.forEach(btn => {
                btn.onclick = function() {
                    const item = this.closest('.item');
                    item.classList.toggle('completed');
                    this.classList.toggle('completed');
                    saveArchitecture();
                };
            });

            const deleteBtns = document.querySelectorAll('.delete-btn');
            deleteBtns.forEach(btn => {
                btn.onclick = function() {
                    const item = this.closest('.item');
                    if (confirm('Delete this item?')) {
                        item.remove();
                        saveArchitecture();
                    }
                };
            });

            // Add "Add Item" buttons to all columns
            const columns = document.querySelectorAll('.column-content');
            columns.forEach(column => {
                const addBtn = document.createElement('button');
                addBtn.className = 'add-item-btn';
                addBtn.innerHTML = '+ Add Item';
                addBtn.onclick = function() {
                    const itemsList = column.querySelector('.items-list');
                    const newItem = document.createElement('div');
                    newItem.className = 'item';
                    newItem.innerHTML = `
                        <h4 contenteditable="true">New Item</h4>
                        <button class="complete-btn">✓</button>
                        <button class="delete-btn">×</button>
                    `;
                    
                    // Add complete functionality to new item
                    const completeBtn = newItem.querySelector('.complete-btn');
                    completeBtn.onclick = function() {
                        newItem.classList.toggle('completed');
                        this.classList.toggle('completed');
                        saveArchitecture();
                    };
                    
                    // Add delete functionality to new item
                    const deleteBtn = newItem.querySelector('.delete-btn');
                    deleteBtn.onclick = function() {
                        if (confirm('Delete this item?')) {
                            newItem.remove();
                            saveArchitecture();
                        }
                    };
                    
                    // Make new item editable and save on change
                    const newTitle = newItem.querySelector('h4');
                    newTitle.addEventListener('blur', function() {
                        saveArchitecture();
                    });
                    
                    itemsList.appendChild(newItem);
                    saveArchitecture();
                };
                column.appendChild(addBtn);
            });

            // Auto-save every 30 seconds as backup
            setInterval(saveArchitecture, 30000);
            
            // Save before page unload
            window.addEventListener('beforeunload', saveArchitecture);
        });
    </script>
</body>
</html> 